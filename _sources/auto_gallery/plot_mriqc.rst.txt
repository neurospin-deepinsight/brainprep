
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_gallery/plot_mriqc.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_auto_gallery_plot_mriqc.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_gallery_plot_mriqc.py:


mriqc quality control use case
==============================

Credit: A Grigis

Example on how to run the mriqc quality control using the brainprep
Singularity container.

.. GENERATED FROM PYTHON SOURCE LINES 11-17

.. code-block:: default

    # sphinx_gallery_thumbnail_path = '_static/carousel/mriqc.png'

    import os
    import subprocess
    from brainrise.datasets import MRIToyDataset








.. GENERATED FROM PYTHON SOURCE LINES 18-19

Please tune these parameters.

.. GENERATED FROM PYTHON SOURCE LINES 19-40

.. code-block:: default


    DATADIR = "/tmp/brainprep-data"
    OUTDIR = "/tmp/brainprep-out"
    WORKDIR = "/tmp/brainprep-out/work"
    HOMEDIR = "/tmp/brainprep-home"
    SCRIPT = "mriqc"
    SIMG = "/volatile/nsap/brainprep/mriqc/brainprep-mriqc-latest.simg"

    for path in (DATADIR, OUTDIR, HOMEDIR, WORKDIR):
        if not os.path.isdir(path):
            os.mkdir(path)
    dataset = MRIToyDataset(root=DATADIR)
    cmd = ["singularity", "run", "--bind", "{0}:/data".format(DATADIR),
           "--bind", "{0}:/out".format(OUTDIR), "--home", HOMEDIR, "--cleanenv",
           SIMG,
           "brainprep", SCRIPT,
           "/data",
           "sub-unknown",
           "--outdir", "/out",
           "--workdir", "/out/work"]





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    Downloading https://raw.github.com/muschellij2/open_ms_data/master/cross_sectional/coregistered_resampled/patient01/T1W.nii.gz.
    Downloading https://raw.github.com/muschellij2/open_ms_data/master/cross_sectional/coregistered_resampled/patient01/T2W.nii.gz.
    Downloading https://raw.github.com/muschellij2/open_ms_data/master/cross_sectional/coregistered_resampled/patient01/FLAIR.nii.gz.
    Downloading https://raw.github.com/muschellij2/open_ms_data/master/cross_sectional/coregistered_resampled/patient01/consensus_gt.nii.gz.
    Downloading https://raw.github.com/muschellij2/open_ms_data/master/cross_sectional/coregistered_resampled/patient01/brainmask.nii.gz.




.. GENERATED FROM PYTHON SOURCE LINES 41-42

You can now execute this command.

.. GENERATED FROM PYTHON SOURCE LINES 42-45

.. code-block:: default


    print(" ".join(cmd))





.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    singularity run --bind /tmp/brainprep-data:/data --bind /tmp/brainprep-out:/out --home /tmp/brainprep-home --cleanenv /volatile/nsap/brainprep/mriqc/brainprep-mriqc-latest.simg brainprep mriqc /data sub-unknown --outdir /out --workdir /out/work





.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  4.567 seconds)

**Estimated memory usage:**  771 MB


.. _sphx_glr_download_auto_gallery_plot_mriqc.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: plot_mriqc.py <plot_mriqc.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: plot_mriqc.ipynb <plot_mriqc.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
