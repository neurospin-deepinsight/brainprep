
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_gallery/plot_fsreconall.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_auto_gallery_plot_fsreconall.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_gallery_plot_fsreconall.py:


FreeSurfer pre-processing use case
==================================

Credit: A Grigis

Example on how to run the FreeSurfer pre-processing using the brainprep
Singularity container.

.. GENERATED FROM PYTHON SOURCE LINES 11-17

.. code-block:: Python

    # sphinx_gallery_thumbnail_path = '_static/carousel/freesurfer.png'

    import os
    import subprocess
    from brainrise.datasets import MRIToyDataset








.. GENERATED FROM PYTHON SOURCE LINES 18-19

Please tune these parameters: not that you need a valid FreeSurfer license.

.. GENERATED FROM PYTHON SOURCE LINES 19-42

.. code-block:: Python


    DATADIR = "/tmp/brainprep-data"
    OUTDIR = "/tmp/brainprep-out"
    HOMEDIR = "/tmp/brainprep-home"
    SCRIPT = "fsreconall"
    SIMG = "/volatile/nsap/brainprep/anat/brainprep-anat-latest.simg"
    FS_LICENSE = "/out/license.txt"

    for path in (DATADIR, OUTDIR, HOMEDIR):
        if not os.path.isdir(path):
            os.mkdir(path)
    dataset = MRIToyDataset(root=DATADIR)
    t1w_file = os.path.join(DATADIR, os.path.basename(MRIToyDataset.t1w_url))
    mask_file = os.path.join(DATADIR, os.path.basename(MRIToyDataset.mask_url))
    cmd = ["SINGULARITYENV_FS_LICENSE={0}".format(FS_LICENSE),
           "singularity", "run", "--bind", "{0}:/data".format(DATADIR),
           "--bind", "{0}:/out".format(OUTDIR), "--home", HOMEDIR, "--cleanenv",
           SIMG,
           "brainprep", SCRIPT,
           "sub-test",
           t1w_file.replace(DATADIR, "/data"),
           "/out"]








.. GENERATED FROM PYTHON SOURCE LINES 43-44

You can now execute this command.

.. GENERATED FROM PYTHON SOURCE LINES 44-47

.. code-block:: Python


    print(" ".join(cmd))





.. rst-class:: sphx-glr-script-out

 .. code-block:: none

    SINGULARITYENV_FS_LICENSE=/out/license.txt singularity run --bind /tmp/brainprep-data:/data --bind /tmp/brainprep-out:/out --home /tmp/brainprep-home --cleanenv /volatile/nsap/brainprep/anat/brainprep-anat-latest.simg brainprep fsreconall sub-test /data/T1W.nii.gz /out





.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 0.278 seconds)

**Estimated memory usage:**  68 MB


.. _sphx_glr_download_auto_gallery_plot_fsreconall.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: plot_fsreconall.ipynb <plot_fsreconall.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: plot_fsreconall.py <plot_fsreconall.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: plot_fsreconall.zip <plot_fsreconall.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
